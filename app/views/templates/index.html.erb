<% if flash[:alert] %>
  <div class="alert alert-danger">
    <%= flash[:alert] %>
  </div>
<% end %>

<% if flash[:success] %>
  <div class="alert alert-success">
    <%= flash[:success] %>
  </div>
<% end %>

<% if flash[:error] %>
  <div class="alert alert-danger">
    <%= flash[:error] %>
  </div>
<% end %>

<h1 class="text-center"><i>Modelos Disponíveis</i></h1>

<br>
<div class="row">
  <% @templates.each do |template| %>
    <div class="col-lg-3 col-md-6 mb-3">
      <div class="card border-primary">
        <div class="card-body">
          <h5 class="card-title"> <%= template %> </h5>
          <p class="card-text">
            <b>Criado em:</b> <%= template.created_at.strftime('%d/%m/%Y %H:%M') %><br>
            <b>Nº de questões:</b> <%= template.questions.count %>
          </p>
          <div style="width: 75%;">
            <div style="display: inline-block;"> <%= link_to 'Exibir', template_path(template.id), class:'btn btn-success' %> </div>
            <div style="float: right;"> <%= button_to 'Remover', template_path(template.id), method: :delete, class:'btn btn-danger delete-template-button' %> </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<% if @templates.empty? %>
  <p>Nenhum modelo foi encontrado.</p>
<% end %>

<br>

<div style="width: 23%;">
  <div style="display: inline-block;"> <%= link_to 'Voltar', manager_path, class: 'btn btn-primary' %> </div>
  <div style="float: right;"> <%= link_to 'Novo modelo', new_template_path, class: 'btn btn-primary' %> </div> <br><br>
</div>

<style>
.btn-primary{
  background-color: #007FFF;
  color: white !important;
  padding: 10px 25px;
  border-radius: 4px;
  border: none;
}
.btn-success{
  background-color: #a3a3a3;
  border-radius: 4px;
  border: none;
}
.btn-danger{
  background-color: #a3a3a3;
  border-radius: 4px;
  border: none;
}
</style>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const deleteButtons = document.querySelectorAll(".delete-template-button");
    deleteButtons.forEach(function(button) {
      button.addEventListener("click", function(event) {
        if (!confirm("Tem certeza que quer deletar este modelo?")) {
          event.preventDefault();
        }
      });
    });
  });
</script>
